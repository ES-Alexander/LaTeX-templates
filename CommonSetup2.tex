% ------------- GENERAL -------------- %
\usepackage{amsfonts} % fonts package
% math, symbols, and theorems packages (esint -> oiint, mathrsfs -> \mathscr{L})
\usepackage{amsmath, amsthm, amssymb, esint, mathrsfs} 
\usepackage{mathtools} % Provides \Aboxed{...}, boxed align equations.
\usepackage{enumitem} % Allows for roman numbering of lists
% colour package (colour!num -> colour @ num% opacity)
\usepackage{xcolor} 
\usepackage{listings} % nicely formatted code

% -------------- HEADER --------------- %
\usepackage{fancyhdr} % creates header
\pagestyle{fancy}
\fancyhf{}
\lhead{\leftHeader} % left header
\rhead{\rightHeader} % right header
% page number bottom right (instead of default middle)
\rfoot{\thepage} 

% ------------ PAGE SIZES ------------ %
% Long side of A4 paper
\deflength{\aflong}{29.7cm}
% Short side of A4 paper
\deflength{\afshort}{21cm}
% Long side of A3 paper
\deflength{\atlong}{42cm}
% Short side of A3 paper
\deflength{\atshort}{29.7cm}

% Text width can be determined using (pagewidth - 2\totalmargin)

% Set page size with:
% \eject \pdfpagewidth=<width> \pdfpageheight=<height>

% Set a page to a new size (\setpagesize{width}{height})
\newcommand{\setpagesize}[2]{
		\eject 
		% set height and width
		\pdfpagewidth = #1 \pdfpageheight = #2
		% adjust horizontal and vertical offset w.r.t. a4 portrait basis
		\newgeometry{
			top = \topMargin, 
			bottom = \bottomMargin - (#2 - \aflong),
			left = \leftMargin,
			right = \rightMargin - (#1 - \afshort)
		}
		% refresh header and footer to suit new page size
		\fancyheadoffset[R]{0cm}  \fancyfootoffset[R]{0cm}
}

% Sets page to A4 portrait
\newcommand{\setafport}{\setpagesize{\afshort}{\aflong}}

% Sets page to A3 landscape
\newcommand{\setatland}{\setpagesize{\atlong}{\atshort}}

% Sets page to A4 landscape
\newcommand{\setafland}{\setpagesize{\aflong}{\afshort}}

% Sets page to A3 portrait
\newcommand{\setatport}{\setpagesize{\atshort}{\atlong}} 

%-------------------FIGURES ---------------------%
\usepackage{graphicx, float, caption}
% package enabling subfigures
\usepackage{subcaption}

% \fig{scale 1=100%}{filename}{caption}
\newcommand{\fig}[3]{\begin{figure}[H] 
    \centering
    \includegraphics[scale=#1]{#2}
    \caption{#3 \label{fig: #2}}
\end{figure}}

% Insert figures with a frame
\newcommand{\framefig}[3]{\begin{figure}[H] 
    \centering
    \frame{\includegraphics[scale=#1]{#2}}
    \caption{#3 \label{fig: #2}}
\end{figure}}

% Insert sub-figures (within a figure)
%\subfig{alignment}{fig-width}{img-scale/height/width}{filename}{caption}
% alignment = t(top) / b(bottom)
% width e.g. = 0.5\textwidth
% scale e.g. = scale=0.5 / height=5cm / width=3in
% filename e.g. = image / image.jpg / etc
% caption e.g. = Descriptive subfigure caption
\newcommand{\subfig}[5]{
    \begin{subfigure}[#1]{#2}
        \centering
        \includegraphics[#3]{#4}
        \caption{#5 \label{sfig: #4}}
    \end{subfigure}
}

%--------------------TABLES----------------------%
% Use as \easytable{caption}{columns}{contents}
%   caption e.g. = Table Caption (auto-labelled as 'tab: Table Caption')
%   columns = column distribution, types, and separation 
%     e.g. |c|c|p{0.5\linewidth}|
%     Using p{n\linewidth} sets that column to justified, with width n times
%     text-width of the line.
%     Using c sets that column to be centered, with width auto-scaled.
%     Vertical line sets that column to have a vertical border there
%     Space separates columns without a border.
%   contents = table contents
%     e.g. 
%      \hline % adds a horizontal line
%      \rowcolor{tableHeadColour} 
%      \textbf{Heading1}  & \textbf{Heading2} & \textbf{Heading3} \\ 
%      % \\ changes to next row of table
%      \hline
%      \textbf{Side Heading} & Text & Text\\
%      \hline
\newcommand{\easytable}[3]{
  \begin{table}[H]
    \footnotesize % sets text size to that of footnotes, within table
    \centering % centers table on screen
    \caption{#1}
    \label{tab: #1}
    \begin{tabular}{#2} 
      #3
    \end{tabular}
  \end{table}
}

\newcommand{\headingrow}{\hline\rowcolor{tableHeadColour}}
\newcommand{\row}{\\ \hline}

%-------------------COMMENTS---------------------%
% Insert multi-line comments with \comment{<text>}
\newcommand{\comment}[1]{} 
% Insert displayed multi-line comments using \dcom{<text>}
\newcommand{\dcom}[1]{\textcolor{red}{\textit{#1}}}

%-------------CODE FORMATTING---------------%
% Matlab
\usepackage[numbered,framed]{matlab-prettifier} % MATLAB nice code

% Python
% Default fixed font does not support bold face
\DeclareFixedFont{\ttb}{T1}{txtt}{bx}{n}{10} % for bold
\DeclareFixedFont{\ttm}{T1}{txtt}{m}{n}{10}  % for normal
% Custom colors
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}
\definecolor{lightgrey}{rgb}{0.7,0.7,0.7}
\definecolor{black}{rgb}{0,0,0}

\newcounter{codeCounter}

\newcommand{\codeCaption}[2][]{
  \refstepcounter{codeCounter}
  \vspace{-\topsep}
	\begin{center}
		Listing \arabic{codeCounter}: {#2 \label{code: 
			\ifx&#1&%
			  #2 % optional arg is empty, use caption as label
			\else
			  #1 % optional arg available, use it as label
			\fi
		}}
	\end{center}
}

% use as \python{filename}{caption label}
\newcommand{\python}[2]{
	\vspace{\topsep}
  \lstinputlisting[language=Python, numbers=left, 
      numberstyle=\color{lightgrey}\small, numbersep=8pt, basicstyle=\ttm,
      otherkeywords={self}, keywordstyle=\ttb\color{deepblue},
      emph={__init__,__call__,__eq__,__str__,__repr__}, % Custom highlighting
      emphstyle=\ttb\color{deepred},                    % Highlighting style
      stringstyle=\color{deepgreen}, commentstyle=\color{deepred},
      frame=single, showstringspaces=false, breaklines=true]{#1}
  \codeCaption[#1]{#2}
}

% use as \matlab{filename}{caption label}
\newcommand{\matlab}[2]{
	\vspace{\topsep}
  \lstset{style=Matlab-editor}
  \lstinputlisting{#1}
  \codeCaption[#1]{#2}
}

%------------------SECTIONS--------------------%

% Normal
\newcommand{\sectionl}[1]{\section{#1} \label{sec: #1}}
\newcommand{\subsectionl}[1]{\subsection{#1} \label{ssec: #1}}
\newcommand{\subsubsectionl}[1]{\subsubsection{#1} \label{sssec: #1}}

% Appendices
\newcommand{\sectional}[1]{\section{#1} \label{a: #1}}
\newcommand{\subsectional}[1]{\subsection{#1} \label{as: #1}}
\newcommand{\subsubsectional}[1]{\subsubsection{#1} \label{ass: #1}}

%-----------------REFERENCING------------------%
\newcommand{\reftab}[1]{\ref{tab: #1}}
\newcommand{\reffig}[2][]{\ref{#1fig: #2}}
\newcommand{\refsec}[2][]{\ref{#1sec: #2}}
\newcommand{\refcode}[1]{\ref{code: #1}}
\newcommand{\refapp}[2][]{\ref{a#1: #2}}

% Reference figures:
\newcommand{\figref}[1]{Figure \reffig{#1}}
% Reference subfigures:
\newcommand{\sfigref}[1]{Figure \reffig[s]{#1})}
% Reference tables:
\newcommand{\tabref}[1]{Table \reftab{#1}}
% Reference code:
\newcommand{\coderef}[1]{Listing \refcode{#1}}
% Reference sections:
\newcommand{\secref}[2][]{Section \refsec[#1]{#2}}
% Reference appendices:
\newcommand{\appref}[2][]{Appendix \refapp[#1]{#2}}

%--------------MATHS NOTATIONS---------------%
% Insert units with \unit[power]{<unit>} (e.g. \unit[3]{m} -> m^3)
\newcommand{\unit}[2][]{\ \text{#2}^{#1}}
\newcommand{\nsunit}[2][]{\text{#2}^{#1}}

% Insert *10^n with \E{n} (e.g. \E{-5})
\newcommand{\E}[1]{\times 10^{#1}}
\newcommand{\tE}[1]{$\E{#1}$}

% Command for math formatted differentials (use \D var)
\newcommand{\D}{\ \mathrm{d}} 

% Command for degrees symbol
\renewcommand{\deg}[1]{{#1}^\circ}

% Command for short bolded vector notation
\newcommand{\ve}[1]{\mathbf{#1}}

% Commands for left/right surrounding brackets
\newcommand{\lr}[1]{\left( #1 \right)}
\newcommand{\lrs}[1]{\left[ #1 \right]}
\newcommand{\lra}[1]{\left | #1 \right |}

% Commands for integrals
\newcommand{\eint}[2]{\int #1 \D #2}
\newcommand{\eiint}[3]{\iint #1 \D #2 \D #3}
\newcommand{\dint}[4]{\int_{#1}^{#2} #3 \D #4} % definite integral
\newcommand{\diint}[7]{\dint{#1}{#2}{\dint{#3}{#4}{#5}{#6}}{#7}}

% Command for partial derivatives
\newcommand{\del}[2]{\dfrac{\partial #1}{\partial #2}}

% Command for full derivatives (nth order)
\newcommand{\der}[3][]{\dfrac{\D ^{#1} #2}{\D {#3}^{#1}}}

% Command for common redefinitions (brackets included)
\renewcommand{\cos}[2][]{\text{cos}^{#1}\!\lr{#2}} % optional power
\renewcommand{\sin}[2][]{\text{sin}^{#1}\!\lr{#2}} % optional power
\renewcommand{\tan}[2][]{\text{tan}^{#1}\!\lr{#2}} % optional power
\renewcommand{\ln}[1]{\text{ln}\!\lr{#1}}
\renewcommand{\log}[2][]{\text{log}_{#1}\!\lr{#2}} % optional base
\newcommand{\limit}[2]{\lim\limits_{{#1}\rightarrow{#2}}}

% Command for quadratic formula
\newcommand{\qf}[3]{\dfrac{-(#2)\pm\sqrt{(#2)^2-4\cdot #1 \cdot #3}}{2\cdot #1}}
